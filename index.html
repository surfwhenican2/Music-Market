<!doctype html>
<head>
  <script src="//cdn.optimizely.com/js/141578538.js"></script>
  <meta charset="utf-8">

  <title>CS147 App</title>
  <meta name="description" content="CS 147 App">
  <meta name="viewport" content="width=device-width">
  
  <link rel="stylesheet" href="css/reset.css">

  <link rel="stylesheet" href="css/styles.css" media="all" type="text/css" />
  <link rel="stylesheet"  href="http://jquerymobile.com/demos/1.2.0/css/themes/default/jquery.mobile-1.2.0.css" />  
  <link rel="stylesheet" href="http://jquerymobile.com/demos/1.2.0/docs/_assets/css/jqm-docs.css"/>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="js/underscore-1.1.6.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.1.6.min.js"></script>
  <script src="js/app.js"></script>

<script src="http://jquerymobile.com/demos/1.2.0/docs/_assets/js/jqm-docs.js"></script>
<script src="http://jquerymobile.com/demos/1.2.0/js/jquery.mobile-1.2.0.js"></script>
<script src="js/highstock.js" type="text/javascript"></script>

<style type="text/css"> 
		.section {padding: 0 10px;}
	    table { width:100%; }
	    table caption { text-align:left;  }
	    table thead th { text-align:left; border-bottom-width:1px; border-top-width:1px; }
	    table th, td { text-align:left; padding:6px; vertical-align: text-bottom;} 
	    tfoot tr td {text-align: center;}
	    table.profiles td {text-align: center;}
	  </style> 

</head>

<body>

  <div id="mainapp">
    <div class="content" style="border-bottom: 1px solid #ccc; padding-bottom: 10px;">

    </div>
  </div>
  <div id="menu">
  </div>


  <script type="text/template" id="login-template">
    <div class="title">
        <h1>Music Market!</h1>
    </div>
    <header id="header"></header>
      <div class="login">
        <form class="login-form">
          <h2>Log In</h2>
          <div class="error" style="display:none"></div>
          <input type="text" id="login-username" placeholder="Username" />
          <input type="password" id="login-password" placeholder="Password" />
          <button>Log In</button>
        </form>
        <button data-role="button" id="signup-button">"Don't have a username? Sign Up."</button>
      </div>
  </script>

  <script type="text/template" id="signup-template">
    <div class="title">
        <h1>Music Market</h1>
    </div>
        <form class="signup-form">
          <h2>Sign Up</h2>
          <div class="error" style="display:none"></div>
          <input type="text" id="signup-username" placeholder="Username" />
          <input type="password" id="signup-password" placeholder="Create a Password" />
          <button>Sign Up</button>
        </form>
  </script>

  
  <script type="text/template" id="logged-in-view">
   
      <div id="user-info">
        Signed in as <%= Parse.User.current().get("username") %> (<a href="#" class="log-out">Log out</a>)
      </div>
      <div class="section">
        <div class="main">

        
  	<a href="#homepagepop" data-rel="popup"><h1 style="center">Music Market</h1></a>
		<div class="title" data-role="popup" id="homepagepop">
           Music Market lets you flex your hipster intuition and invest in the hottest new stocks on the market. You will start off with $2,500 in credits.
           <p></p>
           To start, click IPO or All Songs and purchase some shares!
           <p></p>
           If you know your market, you'll become a top investor in no time!
          </div>
        

        <h4> Welcome to music market! To get started, head to 'All Songs' and start building your Portfolio!
        <p></p>
        **Don't know how to invest? Click the Settings page to find out more!**
         </h4>
        </div>
        
   <div data-role="footer" data-position="fixed"> 
      <div data-role="navbar" class="nav-glyphish-example" >
        <ul>
          <li><a href="#" id="page-one" data-icon="custom">IPO</a></li>
          <li><a href="#" id="page-two" data-icon="custom">All Songs</a></li>
          <li><a href="#" id="page-three" data-icon="custom">Portfolio</a></li>
          <li><a href="#" id="page-four" data-icon="custom">Leaders</a></li>
          <li><a href="#" id="page-settings" data-icon="custom">Settings</a></li>
        </ul>
      </div> 
   </div>
        
      <!-- /navbar -->  
      </div>
  </script>

  <script type="text/template" id="ipo-view">
  
 <h1 style="center">IPO</h1>

  <a href="#ipopopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup" id="ipobutton">IPO</a>
      <div data-role="popup" id="ipopopup">
           IPO (Initial Public Offering) features a new song of the day and its listing price.
           <p></p>
           Here, you can sample new music... if you like what you hear, purchase some shares by clicking "Buy"!
          </div>

      <div class="section">
        <div class="main">
        
          <div id='song-name'>Gangnam Style</div>
        	<h4>Listed at $10</h4>
        
          <audio id="gangnam" preload="preload">
            <source src="audio/Gangnam_Style.mp3" type="audio/mp3" />
          </audio>
        
          <button onclick="playMusica(); $(this).hide(); $('#stop_song').show();" id="play_song">
            <img src= "images/play_button.png" />
          </button>
          
          <button onclick="pauseMusica(); $(this).hide(); $('#play_song').show();" style="display:none;" id="stop_song">
            <img src="images/play_button.png" />
          </button>
          
          <p></p>
          
         
   
   <a href="#" data-role="button" data-icon="plus" id="stock-detail-page">Buy</a>
      
	        <script type="text/javascript">
            $('#page-five').button();
            $('#stock-detail-page').button();
            $('#ipobutton').button();
            $('#ipopopup').popup();
            
            
            var playMusica = function() {
              document.getElementById('gangnam').play();//('#gangnam').play();
              console.log($('#gangnam'));
            }
            var pauseMusica = function() {            
              document.getElementById('gangnam').pause()
            }
          </script>
	      </div>
      </div>
  </script>

<script type="text/template" id="page-two-view">

<h1 style="center">All Songs</h1>

<a href="#allsongspopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup" id="allsongsbutton">All Songs</a>
      <div data-role="popup" id="allsongspopup">
           List of all songs (and prices) previously listed on the IPO page.
           <p></p>
           To buy a song, click its name!
          </div>

          <div class="list">
          </div>
        <script type="text/javascript">
        
          $(".btn-bro").button();
          $('#allsongsbutton').button();	
          $('#allsongspopup').popup();
        </script>
        <script type="text/javascript">
      	  $(".btn-bro").button();
          function refresh(){
          $('.list').listview('refresh');
      }
      </script>

  </script>

  <script type="text/template" id="portfolio-view">
  
  <h1 style="center">Portfolio</h1>
  
	 <a href="#portfoliopopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup" id="portfoliobutton">Portfolio</a>
      <div data-role="popup" id="portfoliopopup">
           Your portfolio contains songs that you've purchased from the 'All Songs' or 'IPO' pages, in addition to your net worth.
           <p></p>
            Net worth is your beginning balance plus or minus the gains or losses your songs have made over time. Users with the highest net worths are listed as Top Investors!
           <p></p>
           If you don't see anything now, go buy some songs :)
          </div>
  
      <div class="section"> 
        <div class="portfolio">
        </div>
      </div>
      
         <script type="text/javascript">
          $('#portfoliobutton').button();	
          $('#portfoliopopup').popup();
        </script>
      
  </script>
  

  <script type="text/template" id="page-four-view">
  
  <h1 style="center">Leaders</h1>
  
	  <a href="#leaderspopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup" id="leadersbutton">Leaders</a>
      <div data-role="popup" id="leaderspopup">
           List of top leading Music Market investors, by net worth. These fans are the cream of the crop - they buy before a song blows up in popularity, and sell before it tanks.
           <p></p>
           Leading Investors can win cool prizes like concert tickets and meet-and-greets with their favorite artists!
          </div>
  
      <div class="section">
        <div class="main2">
        </div>
      </div>
      
      <script type="text/javascript">	
       	$('#leadersbutton').button();
        $('#leaderspopup').popup();
      </script>
      
  </script>
  
  <script type="text/template" id="song-trading-view">
  	  
  	 <h1 style="center">Trading</h1> 
  	  
  	  	<a href="#tradingpopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup" id="tradingbutton">Top</a>
      <div data-role="popup" id="tradingpopup">
           Here's where the action happens!
           <p></p> 
           Like what you hear when you click play? Buy new shares!
           <p></p>
           Think this song is lame? Sell shares that you already own. 
           <p></p>
           A graph shows the price of the song over time, influenced by the number of buyers or sellers. 
          </div>
  	  
  	  <div class="section">
        <div class="main">	
       		<div data-role="popup" id="sharesbought">
       			Congrats! Check your portfolio to see your new holdings!
       		</div>
       		
       		<div data-role="popup" id="sharessold">
       			Congrats! Check your portfolio to see you new holdings!
       		</div>

         	<h3 id="song-title"></h3>
          <h4 id="artist-name">by </h4>
          <br />
  	      <div id="container" style="width: 100%; height: 400px"></div>

	        <br /><br />
	   	
          <audio id="gangnam" preload="preload">
            <source src="" type="audio/mp3" />
          </audio>
        
          <button onclick="playMusica(); $(this).hide(); $('#stop_song').show();" id="play_song">
            <img src= "images/play_button.png" />
          </button>
          
          <button onclick="pauseMusica(); $(this).hide(); $('#play_song').show();" style="display:none;" id="stop_song">
            <img src="images/play_button.png" />
          </button>
          

        	   	<table>
        	   		<tr>
        	   			
        	   			<td>
        		   			Current Price:<p id="share-price"></p>
        	   			</td>
        	   		</tr>
        	   		<tr>
        	   			<td style="text-align: right;">BUY</td>
        	   			<td><input id="input-buy" type="number" placeholder="10" style="text-align: right;" /></td>
        	   			<td>
        		   			<a href="#sharesbought" data-rel="popup" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-r" class="btn-bro" id="buyButton">Go</a>
        	   			</td>
        	   		</tr>
        	   		<tr>
        	   			<td style="text-align: right;">SELL</td>
        	   			<td><input id="input-sell" type="number" placeholder="10" style="text-align: right;" /></td>
        	   			<td>
        		   			<a href="#sharessold" data-rel="popup" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-r" class="btn-bro" id="sellButton">Go</a>
        	   			</td>
        	   		</tr>
        	   	</table>
       	       		
        </div>

      </div>
      
      <script type="text/javascript">
            $('#page-five').button();
            
            var playMusica = function() {
              document.getElementById('gangnam').play();//('#gangnam').play();
              console.log($('#gangnam'));
            }
            var pauseMusica = function() {            
              document.getElementById('gangnam').pause();
            }
      	$(".btn-bro").button();
      	$("#sharesbought").popup();
      	$("#sharessold").popup();
      	$('#tradingpopup').popup();
      	$('#tradingbutton').button();
      </script>

  </script>
  
  <script type="text/template" id="page-settings-view">
  
  <h1 style="center"> Settings </h1>
  
  	  <div class="section">
  	  <a href="#" data-role="button" id="change-password" data-icon="arrow-r" class="btn">Change Password</a>
        
        
        <div data-role="popup" id="upload_prof_pic">
          
          
          <form action="post" enctype="multipart/form-data" style="padding:10px;">
            <p>
              Select a photo to upload!
            </p>
            <input type="file" />
            <input type="submit" value="Upload Photo" class="btn-bro" />
          </form>
        </div>
        
      </div>
  	  
  	   <script type="text/javascript">
        $(".btn-bro").button();
        $(".btn").button();
        $("#upload_prof_pic").popup({ overlayTheme: "b" });
      </script>
  </script>

  <script type="text/template" id="song-item-template">
    <li class="done">
      <div class="view">
        <p>Song Item</p>
        <label class="song-title"><%= SongName %></label>
        <label class="song-price"><%= CurrentPrice %></label>
      </div>
    </li>
  </script>

  <script type="text/template">
        <a href="#upload_prof_pic" data-rel="popup" data-icon="arrow-r" class="btn-bro">
  </script>

  <script type="text/template" id="holding-item-view">
    <li class="done">
      <div class="view">

        <label class="song-title"><%= SongName %></label>
        <label class="song-price"><%= CurrentPrice %></label>
      </div>
    </li>
  </script>

    <script type="text/template" id="change-password-template">
    <div class="title">
        <h1>Music Market</h1>
    </div>
        <form class="change-password-form">
          <h3>Type in a new Password</h3>
          <div class="error" style="display:none"></div>
          <input type="password" id="new-password" placeholder="New Password" />
          <button>Set new Password</button>
        </form>
  </script>

</body>

</html>
